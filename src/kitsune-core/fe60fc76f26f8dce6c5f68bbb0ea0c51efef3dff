// -*- mode: js2 -*-
export function put({ db, element }) {
    db.insert(element);
    return element.id;
}

export function find({ db, where }) {
    let criteria = [];

    let count = 0;
    for(let i in where) {
        var obj = {};
        obj[i] = { $in: where[i] };

        criteria.push(obj);
        count++;
    }

    if(count == 1)
        criteria = criteria[0];
    else if(count > 1)
        criteria = { $and: criteria };

    return db.find(criteria);
}

export function remove({ db, elementId }) {
    db.removeWhere({ id: elementId });
}

export default function main() {
    return { put, find, remove };
}
module.exports = main;
